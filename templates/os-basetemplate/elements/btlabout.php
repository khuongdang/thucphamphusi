<?php

defined('JPATH_BASE') or die;
jimport('joomla.form.formfield');


class JFormFieldBTLAbout extends JFormField{

	public function getTemplateName(){
		$value = explode( DIRECTORY_SEPARATOR, str_replace( array( '\elements', '/elements' ), '', dirname(__FILE__) )) ;
		$templateName 	= end($value);
		//$templateName 	= $templateName [ count( $templateName ) - 1 ];
		return $templateName;
	}

	protected function getInput(){

		$stdParams = '{"expand_body_bg":"1","body_color":"#f8f8f8","body_background":"","body_custom_bg_file":"","body_bg_size":"auto","body_bg_repeat":"repeat","body_bg_attachment":"scroll","expand_body_links":"1","body_link_color":"#92999e","body_link_hover_color":"#12abff","body_underline":"none","body_hover_underline":"none","expand_body_font":"1","body_font":"Roboto","links_font":"Roboto","body_text_color":"#666666","expand_body_h1":"1","body_h1_font":"Roboto","body_h1_color":"#666666","body_h1_size":"32","body_h1_font_weight":"500","body_h1_text_transform":"none","expand_body_h2":"1","body_h2_font":"Roboto","body_h2_color":"#666666","body_h2_size":"28","body_h2_font_weight":"500","body_h2_text_transform":"none","expand_body_h3":"1","body_h3_font":"Roboto","body_h3_color":"#666666","body_h3_size":"24","body_h3_font_weight":"500","body_h3_text_transform":"none","expand_body_h4":"1","body_h4_font":"Roboto","body_h4_color":"#666666","body_h4_size":"20","body_h4_font_weight":"500","body_h4_text_transform":"none","expand_body_h5":"1","body_h5_font":"Roboto","body_h5_color":"#666666","body_h5_size":"18","body_h5_font_weight":"500","body_h5_text_transform":"none","expand_body_h6":"1","body_h6_font":"Roboto","body_h6_color":"#666666","body_h6_size":"16","body_h6_font_weight":"500","body_h6_text_transform":"none","expand_header_bg":"1","header_color":"#ffffff","header_background":"","header_custom_bg_file":"","header_bg_size":"auto","header_bg_repeat":"repeat","header_bg_attachment":"scroll","expand_header_links":"0","header_link_color":"#92999e","header_link_hover_color":"#12abff","header_underline":"none","header_hover_underline":"none","expand_header_font":"0","header_font":"PT Sans Narrow","header_links_font":"PT Sans Narrow","header_text_color":"#666666","expand_header_h1":"0","header_h1_size":"32","header_h1_color":"#666666","expand_header_h2":"0","header_h2_size":"28","header_h2_color":"#666666","expand_header_h3":"0","header_h3_size":"24","header_h3_color":"#666666","expand_header_h4":"0","header_h4_size":"20","header_h4_color":"#666666","expand_header_h5":"0","header_h5_size":"18","header_h5_color":"#666666","expand_header_h6":"0","header_h6_size":"16","header_h6_color":"#666666","expand_central_content_bg":"0","central_content_color":"#f8f8f8","central_content_background":"","central_content_custom_bg_file":"","central_content_bg_size":"auto","central_content_bg_repeat":"repeat","central_content_bg_attachment":"scroll","expand_central_content_links":"0","central_content_link_color":"#92999e","central_content_link_hover_color":"#12abff","central_content_underline":"none","central_content_hover_underline":"none","expand_central_content_font":"0","central_content_font":"PT Sans Narrow","central_content_links_font":"PT Sans Narrow","central_content_text_color":"#666666","expand_central_content_h1":"0","central_content_h1_size":"32","central_content_h1_color":"#888888","expand_central_content_h2":"0","central_content_h2_size":"32","central_content_h2_color":"#888888","expand_central_content_h3":"0","central_content_h3_size":"32","central_content_h3_color":"#888888","expand_central_content_h4":"0","central_content_h4_size":"32","central_content_h4_color":"#888888","expand_central_content_h5":"0","central_content_h5_size":"32","central_content_h5_color":"#888888","expand_central_content_h6":"0","central_content_h6_size":"32","central_content_h6_color":"#888888","expand_footer_bg":"1","footer_color":"#ffffff","footer_background":"","footer_custom_bg_file":"","footer_bg_size":"auto","footer_bg_repeat":"repeat","footer_bg_attachment":"scroll","expand_footer_links":"0","footer_link_color":"#92999e","footer_link_hover_color":"#12abff","footer_underline":"none","footer_hover_underline":"none","expand_footer_font":"0","footer_font":"PT Sans Narrow","footer_links_font":"PT Sans Narrow","footer_text_color":"#666666","expand_footer_h1":"0","footer_h1_size":"32","footer_h1_color":"#888888","expand_footer_h2":"0","footer_h2_size":"32","footer_h2_color":"#888888","expand_footer_h3":"0","footer_h3_size":"32","footer_h3_color":"#888888","expand_footer_h4":"0","footer_h4_size":"32","footer_h4_color":"#888888","expand_footer_h5":"0","footer_h5_size":"32","footer_h5_color":"#888888","expand_footer_h6":"0","footer_h6_size":"32","footer_h6_color":"#888888","logo_file":"images\/os_template_logo.png","logo_link":"index.php","logo_width":"226","logo_height":"60","favicon_file":"","expand_custom_meni_1":"1","custom_menu_1_class":"_custom_1","custom_menu_1_bg_color":"#ffffff","custom_menu_1_submenu_bg_color":"#ffffff","custom_menu_1_item_hover_bg_color":"#ffffff","custom_menu_1_font":"Roboto","custom_menu_1_font_weight":"400","custom_menu_1_color":"#666666","custom_menu_1_hover_color":"#000000","custom_menu_1_underline":"none","custom_menu_1_hover_underline":"none","expand_custom_meni_2":"1","custom_menu_2_class":"_custom_2","custom_menu_2_bg_color":"#ffffff","custom_menu_2_submenu_bg_color":"#ffffff","custom_menu_2_item_hover_bg_color":"#ffffff","custom_menu_2_font":"Roboto","custom_menu_2_font_weight":"400","custom_menu_2_color":"#666666","custom_menu_2_hover_color":"#000000","custom_menu_2_underline":"none","custom_menu_2_hover_underline":"none","expand_custom_meni_3":"0","custom_menu_3_class":"_custom_3","custom_menu_3_bg_color":"#ffffff","custom_menu_3_submenu_bg_color":"#ffffff","custom_menu_3_item_hover_bg_color":"#ffffff","custom_menu_3_font":"PT Sans Narrow","custom_menu_3_font_weight":"400","custom_menu_3_color":"#666666","custom_menu_3_hover_color":"#000000","custom_menu_3_underline":"none","custom_menu_3_hover_underline":"none","expand_custom_meni_4":"0","custom_menu_4_class":"_custom_4","custom_menu_4_bg_color":"#ffffff","custom_menu_4_submenu_bg_color":"#ffffff","custom_menu_4_item_hover_bg_color":"#ffffff","custom_menu_4_font":"PT Sans Narrow","custom_menu_4_font_weight":"400","custom_menu_4_color":"#666666","custom_menu_4_hover_color":"#000000","custom_menu_4_underline":"none","custom_menu_4_hover_underline":"none","expand_custom_meni_5":"0","custom_menu_5_class":"_custom_5","custom_menu_5_bg_color":"#ffffff","custom_menu_5_submenu_bg_color":"#ffffff","custom_menu_5_item_hover_bg_color":"#ffffff","custom_menu_5_font":"PT Sans Narrow","custom_menu_5_font_weight":"400","custom_menu_5_color":"#666666","custom_menu_5_hover_color":"#000000","custom_menu_5_underline":"none","custom_menu_5_hover_underline":"none","expand_button_1":"1","button_1_selector":"input.ba-btn-submit[type="submit"], .itp-subscribe .button, .logout-button .btn, .controls .btn, .login button, .registration button.btn-primary, .remind button.btn, .reset button.btn, .contact-form button.btn, .filter-search button.btn, #button_hidden_review input.btn, button.validate, .btn-default, input#newGroup, .content-category a.btn, .product span.addtocart-button input.addtocart-button, #com-form-login #com-form-login-remember input, form.form-validate .buttonBar-right button, .vm-orders-list .order-view input.button, .cart-view #checkoutForm .billto-shipto .floatleft a, .cart-view button, div.itemCommentsForm form input#submitCommentButton, #jform_profile_dob_img, #profile_dob_img, .footer-row a.pt-btn, input.highlight-button, .vm-orders-list .button, #form-login .button, .cart-view .button, .billto-shipto .floatleft.add_bill a, .billto-shipto .floatleft a, .control-buttons button.default, .control-buttons button.button, form#form-login input, .account_form_validate .buttonBar-right button, .manufacturer-details-view .spacer a, span.addtocart-button input.notify-button, a.btn.btn-primary[data-toggle="modal"], .registration button.btn-primary, .controls a.btn, .nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus, button:not(.navbar-toggle), input[type="button"]:not(.quantity-controls), input[type="reset"], input[type="submit"]","expand_button_1_background":"0","button_1_bg_color":"#428bca","expand_button_1_font_text":"1","button_1_text_color":"#ffffff","button_1_font":"Roboto","button_1_font_size":"16","button_1_line_height":"20","button_1_font_weight":"400","button_1_text_transform":"none","expand_button_1_text_shadow":"0","button_1_text_shadow_color":"#000000","button_1_text_shadow_x":"0","button_1_text_shadow_y":"0","button_1_text_shadow_blur":"0","expand_button_1_box":"0","button_1_padding_top":"6","button_1_padding_right":"12","button_1_padding_bottom":"6","button_1_padding_left":"12","expand_button_1_box_shadow":"0","button_1_box_shadow_color":"#000000","button_1_box_shadow_x":"0","button_1_box_shadow_y":"0","button_1_box_shadow_blur":"0","button_1_box_shadow_spread":"0","button_1_box_shadow_type":"inset","expand_button_1_border":"0","button_1_border_radius":"0","button_1_border_width":"0","button_1_border_color":"#428bca","button_1_border_style":"solid","expand_button_1_hover_style":"0","button_1_hover_bg_color":"#2069a8","button_1_hover_border_color":"#428bca","button_1_hover_text_color":"#ffffff","expand_button_2":"1","button_2_selector":".product .vm-details-button a","expand_button_2_background":"0","button_2_bg_color":"#428bca","expand_button_2_font_text":"1","button_2_text_color":"#ffffff","button_2_font":"Roboto","button_2_font_size":"14","button_2_line_height":"20","button_2_font_weight":"400","button_2_text_transform":"none","expand_button_2_text_shadow":"0","button_2_text_shadow_color":"#000000","button_2_text_shadow_x":"0","button_2_text_shadow_y":"0","button_2_text_shadow_blur":"0","expand_button_2_box":"0","button_2_padding_top":"6","button_2_padding_right":"12","button_2_padding_bottom":"6","button_2_padding_left":"12","expand_button_2_box_shadow":"0","button_2_box_shadow_color":"#000000","button_2_box_shadow_x":"0","button_2_box_shadow_y":"0","button_2_box_shadow_blur":"0","button_2_box_shadow_spread":"0","button_2_box_shadow_type":"inset","expand_button_2_border":"0","button_2_border_radius":"0","button_2_border_width":"0","button_2_border_color":"#ffffff","button_2_border_style":"solid","expand_button_2_hover_style":"0","button_2_hover_bg_color":"#2069a8","button_2_hover_border_color":"#ffffff","button_2_hover_text_color":"#ffffff","expand_button_3":"0","button_3_selector":"","expand_button_3_background":"0","button_3_bg_color":"#428bca","expand_button_3_font_text":"0","button_3_text_color":"#ffffff","button_3_font":"PT Sans Narrow","button_3_font_size":"14","button_3_line_height":"20","button_3_font_weight":"400","button_3_text_transform":"none","expand_button_3_text_shadow":"0","button_3_text_shadow_color":"#000000","button_3_text_shadow_x":"0","button_3_text_shadow_y":"0","button_3_text_shadow_blur":"0","expand_button_3_box":"0","button_3_padding_top":"6","button_3_padding_right":"12","button_3_padding_bottom":"6","button_3_padding_left":"12","expand_button_3_box_shadow":"0","button_3_box_shadow_color":"#000000","button_3_box_shadow_x":"0","button_3_box_shadow_y":"0","button_3_box_shadow_blur":"0","button_3_box_shadow_spread":"0","button_3_box_shadow_type":"inset","expand_button_3_border":"0","button_3_border_radius":"0","button_3_border_width":"0","button_3_border_color":"#ffffff","button_3_border_style":"solid","expand_button_3_hover_style":"0","button_3_hover_bg_color":"#2069a8","button_3_hover_border_color":"#ffffff","button_3_hover_text_color":"#ffffff","expand_preloader":"1","preloader":"rotating-plane","preloader_color":"#12abff","soc_icons_size":"18","twitter":"#","facebook":"#","flickr":"","linkedin":"#","youtube":"","pinterest":"","google":"#","dribbble":"","vimeo":"","instagram":"","vk":"","copyrights":"<p><a title=\"OrdaSoft\" href=\"http:\/\/ordasoft.com\/\" target=\"_blank\" rel=\"noopener noreferrer\">Template Design \u00a9 Joomla Templates OrdaSoft. All rights reserved.<\/a><\/p>","tracking_code":"","reset":"0"}';

		//reset if 1
		$reset = $this->form->getData()->get('params')->reset;
		
		if($reset == 1){
			//set params to DB
			$stdParamsToDb = addslashes($stdParams);
			$db = JFactory::getDbo();
			$query = "UPDATE #__template_styles SET params = '".$stdParamsToDb."' WHERE template = 'os-basetemplate'";
			$db->setQuery($query);
			$result = $db->query();

			//update page, in order to add new values in form
			$uri = JFactory::getURI();
			$app = JFactory::getApplication();
			$url = $uri->toString();
			$app->redirect($url);
		}


		$doc = JFactory::getDocument();

		$templateName = $this->getTemplateName();

 		$doc->addStyleSheet(JURI::root().'templates/'.$templateName.'/admin/css/btl_admin.css');
		if(version_compare(JVERSION,"3.0.0","lt")){
		    $doc->addScript(JURI::root().'templates/'.$templateName.'/admin/js/btl_slider.js');
		    $doc->addScript(JURI::root().'templates/'.$templateName.'/admin/js/btl_admin.js');
		}
	}

}
